<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 首先还是创建一个引用类型 再创建另一个变量来复制这个引用类型
        let hd = {
            name: '后盾人',
            age: 19
        }
        let edu = hd; // 此时这个引用类型被调用两次

        let set = new WeakSet()
        set.add(hd) // WeakSet本身不算调用这个引用类型，所以还是被调用两次
        set.add(edu) // WeakSet会把重复的项目去掉，所以下面打印出来的结果还是只有一项
        console.log(set)

        // 现在把两个变量设为空，让数据消失
        edu = null
        hd = null

        // 由于没有变量引用数据，系统会启动垃圾回收机制，但此时WeakSet并没有及时清空
        //打印出来的结果还是有一个值
        setTimeout(function() {
            console.log(set)
        }, 2000)

        // 由于弱引用类型里面的数据个数可能不符合实际 所以WeakSet没有循环 values keys size之类的操作
    </script>
</body>

</html>